---
version: "0.1.0"
title: "Glyph Specification v0"
description: "Initial specification for Glyph OS content-addressed storage system"

glyph:
  description: "A glyph is a content-addressed data unit with metadata"

  structure:
    id:
      type: "string"
      format: "sha256 hash (64 hex characters)"
      description: "SHA256 hash of the content, used as unique identifier"
      required: true
      generation: "Computed from content field using SHA256"

    content:
      type: "string"
      description: "The primary content of the glyph"
      required: true

    metadata:
      type: "object"
      description: "Optional metadata associated with the glyph"
      required: false
      default: {}

  content_addressing:
    algorithm: "SHA256"
    encoding: "UTF-8"
    description: "ID is generated by computing SHA256 hash of content"
    properties:
      - "Deterministic: same content always produces same ID"
      - "Immutable: changing content changes ID"
      - "Collision-resistant: different content produces different IDs"

  persistence:
    format: "JSON"
    filename_pattern: "glyph_{id}.json"
    directory: "persistence/"
    structure: |
      {
        "id": "<sha256_hash>",
        "content": "<content_string>",
        "metadata": {
          // optional key-value pairs
        }
      }

cli_tools:
  create_glyph:
    command: "./runtime/cli/create_glyph.py"
    usage: "create_glyph.py <content> [--metadata <json>]"
    output: "Prints glyph ID (SHA256 hash) to stdout"
    side_effects: "Creates persistence/glyph_{id}.json file"

  query_glyph:
    command: "./runtime/cli/query_glyph.py"
    usage: "query_glyph.py <id>"
    output: "Prints glyph JSON to stdout"
    exit_codes:
      0: "Success - glyph found"
      1: "Error - glyph not found"

testing:
  framework: "unittest"
  test_file: "runtime/tests/test_create_query.py"
  required_tests:
    - "test_create_glyph: Verify glyph creation and SHA256 addressing"
    - "test_query_glyph: Verify glyph retrieval by ID"

  ci:
    platform: "GitHub Actions"
    workflow: ".github/workflows/test.yml"
    triggers:
      - "push to master/main"
      - "pull requests"

phase: "phase0-runtime-stub"
status: "Initial prototype"
